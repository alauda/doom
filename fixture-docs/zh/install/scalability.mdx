---
weight: 20
i18n:
  title:
    en: Capacity Planning
---

# 容量规划 \{#scale}

在安装管理集群前，必须依据业务目标和实际需求选择适配的安装场景。不同场景对基础设施资源配置及架构设计要求存在明显差异，提供以下三种典型场景的规划建议：

### 安装场景选择 \{#scenario}

#### 场景一：功能验证

**适用范围**
适用于平台功能验证、演示环境搭建或技术可行性测试。该场景仅用于验证平台核心功能，不承载生产级业务流量，资源配置为最低水平。

**核心特性**

- **单节点部署**：控制平面与计算功能集成于单节点
- **轻量负载**：仅运行平台核心组件及不超过 10 个 Demo Pod
- **非生产用途**：不满足业务连续性和高可用性要求

**资源配置要求**

| 维度     | 规格要求               |
| -------- | ---------------------- |
| 节点数量 | 1 台（物理机或虚拟机） |
| CPU      | ≥16 核                 |
| 内存     | ≥32GB                  |

**架构说明**

- 管理集群以单节点形式部署，集成所有控制与计算功能
- 所有业务负载均在该节点运行（建议 Demo Pod 数量 ≤ 10）
- 不支持横向扩展，故不适合生产环境

---

#### 场景二：ISV 集成交付

**适用范围**
针对 ISV（独立软件供应商）的标准化交付需求，安装管理集群时既负责平台管理，又直接运行 ISV 应用，无需额外部署业务集群。

**核心特性**

- **生产级部署**：直接承载 ISV 业务应用，满足生产环境 SLA
- **资源协同**：节点配置既满足平台组件要求，也满足 ISV 应用负载
- **高可用保障**：至少 3 个控制节点构成高可用架构

**资源配置要求**

| 部署模式     | 节点类型 | 数量 | 最小规格              | 推荐规格           | 备注                                |
| ------------ | -------- | ---- | --------------------- | ------------------ | ----------------------------------- |
| **最小部署** | 控制节点 | 3    | 8C16GB + ISV 需求     | 12C24GB + ISV 需求 | 建议预留约 30% 冗余资源             |
|              | 计算节点 | 0    | —                     | —                  | 控制节点上共享运行 ISV 应用         |
| **推荐部署** | 控制节点 | 3    | 8C16GB                | 12C24GB            | 运行 Kubernetes 组件及平台控制平面  |
|              | 计算节点 | ≥2   | 根据 ISV 应用负载需求 | —                  | 独立运行 ISV 应用，建议实现 HA 部署 |

**架构说明**

- 安装管理集群时同时部署平台组件和 ISV 业务 Pod，建议使用节点污点（Taint）对关键组件进行隔离
- ISV 应用建议在专用计算节点上运行，避免与控制平面资源竞争
- 扩容建议：每新增 50 个业务 Pod，按 ISV 应用资源需求增加 1 个计算节点

---

#### 场景三：多集群管控（数据中心级）

**适用范围**
适用于大型企业数据中心环境，需统一管理跨云、跨地域的多个业务集群。随着业务集群数量增加，安装管理集群时须动态扩展计算节点和资源配置，以确保高可用性和高性能。

**核心特性**

- **混合管控**：支持跨云、跨地域业务集群统一管理
- **弹性扩展**：管理集群资源与接入业务集群数量呈线性扩展
- **物理隔离**：控制平面与计算平面建议物理隔离部署，确保系统稳定性

**基准资源配置**

| 节点类型 | 数量 | 最小规格 | 推荐规格 | 部署策略                 |
| -------- | ---- | -------- | -------- | ------------------------ |
| 控制节点 | 3或5 | 8C16GB   | 16C32GB  | 独立部署，启用反亲和策略 |
| 计算节点 | ≥2   | 12C24GB  | 24C48GB  | 建议预留 30% 资源冗余    |

**动态扩展规则**

1. **纵向扩容**：单节点可按梯度升级（如 12C24GB → 24C48GB → 48C96GB）
2. **横向扩容**：每接入 10 个业务集群，建议扩充 20% 的计算资源（增加节点数量或提升节点规格）
3. **监控触发**：当 CPU/内存使用率持续超过 70% 时，启动扩容措施

**架构说明**

- 控制平面由 3 个节点构成 ETCD 集群，建议启用 TLS 加密与定期快照
- 平台关键组件建议部署于独立计算节点上，避免资源竞争
- 灾备建议：跨多个可用区部署，确保计算节点至少分布于 2 个物理故障域中

---

### 全局规划建议

1. **资源冗余**：生产环境建议预留至少 30% 的资源余量，以应对突发负载
2. **网络规划**：管理集群应部署在独立 VPC 或 VLAN 内，确保带宽 ≥1Gbps
3. **存储隔离**：ETCD 存储建议采用 NVMe SSD，并与业务存储物理隔离
